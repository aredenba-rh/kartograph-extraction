{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Partition Schema",
  "description": "Schema for a file partition with entity and relationship ontologies",
  "type": "object",
  "required": ["partition_id", "title", "description", "paths", "entity_ontology", "relationship_ontology"],
  "properties": {
    "partition_id": {
      "type": "integer",
      "description": "Unique auto-incrementing integer identifier for this partition (e.g., 1, 2, 3)"
    },
    "title": {
      "type": "string",
      "description": "One sentence summary of what can be found in this partition"
    },
    "description": {
      "type": "string",
      "description": "Concise description of how this set of files relate to each other and to the repo as a whole"
    },
    "paths": {
      "type": "array",
      "description": "Array of file paths included in this partition",
      "items": {
        "type": "string"
      },
      "minItems": 1
    },
    "entity_ontology": {
      "type": "array",
      "description": "Entity ontology for this partition",
      "items": {
        "$ref": "#/definitions/entity"
      }
    },
    "relationship_ontology": {
      "type": "array",
      "description": "Relationship ontology for this partition",
      "items": {
        "$ref": "#/definitions/relationship"
      }
    }
  },
  "definitions": {
    "entity": {
      "type": "object",
      "required": ["type", "example_files", "example_files_description"],
      "properties": {
        "type": {
          "type": "string",
          "description": "The entity type (e.g., 'Person', 'Component', 'Service')"
        },
        "example_files": {
          "type": "array",
          "description": "1-3 example file paths that contain instances of this entity type",
          "items": {
            "type": "string"
          },
          "minItems": 1,
          "maxItems": 3
        },
        "example_files_description": {
          "type": "string",
          "description": "Description of what content in the example files motivates the inclusion of this entity type"
        }
      }
    },
    "relationship": {
      "type": "object",
      "required": ["type", "example_files", "example_files_description"],
      "properties": {
        "type": {
          "type": "string",
          "description": "The relationship type (e.g., 'CONTAINS', 'DEPENDS_ON', 'IMPLEMENTS')"
        },
        "example_files": {
          "type": "array",
          "description": "Tuple (fileA, fileB) showing where this relationship appears. Same file if relationship is internal: (fileA, fileA)",
          "items": {
            "type": "string"
          },
          "minItems": 2,
          "maxItems": 2
        },
        "example_files_description": {
          "type": "string",
          "description": "Description of the relationship example showing source in first file and target in second file"
        }
      }
    }
  }
}
